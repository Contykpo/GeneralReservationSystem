@page "/admin/create-admin"
@attribute [Authorize(Roles = "Admin")]

@using Microsoft.AspNetCore.Authorization

<MudContainer Class="my-8">

    <MudCard
        Class="p-4">

        @*Titulo*@
        <MudCardHeader>
            <MudText Typo="Typo.h5">Crear nuevo administrador</MudText>
        </MudCardHeader>

        @*Form de registro*@
        <MudCardContent>
            <MudForm @ref="_createAdminForm" Model="_newAdmin">

                <MudStack Spacing="4">

                    <MudTextField @bind-Value="_newAdmin.UserName"
                                  Placeholder="Nombre">
                    </MudTextField>

                    <MudTextField @bind-Value="_newAdmin.Email"
                                  Placeholder="Email"
                                  InputType="InputType.Email">
                    </MudTextField>

                    <MudTextField @bind-Value="_newAdmin.Password"
                                  Placeholder="Contraseña"
                                  InputType="InputType.Password">
                    </MudTextField>

                    <MudTextField @bind-Value="_newAdmin.ConfirmPassword"
                                  Placeholder="Confirmar Contraseña"
                                  InputType="InputType.Password">
                    </MudTextField>

                </MudStack>

            </MudForm>
        </MudCardContent>
        
        @*Acciones*@
        <MudCardActions Class="mt-5">
            <MudButton Variant="Variant.Filled" Color="Color.Error" StartIcon="@Icons.Material.Filled.Delete" Href="/admin/users">
                Cancelar
            </MudButton>
            <MudButton Variant="Variant.Filled" Color="Color.Primary" StartIcon="@Icons.Material.Filled.Add" Class="mx-4" OnClick="CreateAdminAsync">
                Crear
            </MudButton>
        </MudCardActions>

    </MudCard>

</MudContainer>

@code {

    private MudForm _createAdminForm = new();

    private RegisterUserDto _newAdmin = new();

    [Inject] private IClientAuthenticationService _authenticationService { get; set; }

    private async Task CreateAdminAsync()
    {
        //await _authenticationService.RegisterAdminAsync(_newAdmin);
    }

}
